<!DOCTYPE html>
<html lang="en">

<head>
  <style>
    #map {
      height: 70vh;
      width: 100vw;
    }
  </style>
  <meta charset="utf-8">
  <title>Resto-Finder</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="" name="keywords">
  <meta content="" name="description">

  <!-- Facebook Opengraph integration: https://developers.facebook.com/docs/sharing/opengraph -->
  <meta property="og:title" content="">
  <meta property="og:image" content="">
  <meta property="og:url" content="">
  <meta property="og:site_name" content="">
  <meta property="og:description" content="">

  <!-- Twitter Cards integration: https://dev.twitter.com/cards/  -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="">
  <meta name="twitter:title" content="">
  <meta name="twitter:description" content="">
  <meta name="twitter:image" content="">

  <!-- Favicon -->
  <link href="img/favicon.ico" rel="icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Raleway:400,500,700|Roboto:400,900" rel="stylesheet">

  <!-- Bootstrap CSS File -->
  <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Libraries CSS Files -->
  <link href="lib/font-awesome/css/font-awesome.min.css" rel="stylesheet">

  <!-- Main Stylesheet File -->
  <link href="css/style.css" rel="stylesheet">

  <meta name="google-signin-client_id" content="935229832126-67hpffsjsd77pb30nsb5n18u8jutlgh1.apps.googleusercontent.com">
  <!-- =======================================================
    Theme Name: Bell
    Theme URL: https://bootstrapmade.com/bell-free-bootstrap-4-template/
    Author: BootstrapMade.com
    Author URL: https://bootstrapmade.com
  ======================================================= -->
</head>

<body>
  <!-- Page Content
    ================================================== -->
  <!-- Hero -->

  <section class="hero" id="hero">
    <div class="container text-center">
      <div class="row">
        <div class="col-md-12">
          <a class="hero-brand" href="index.html" title="Home"><img class="w-50 h-50"alt="Bell Logo" src="img/finder.png"></a>
        </div>
      </div>

      <div class="col-md-12">
        <h1>
          Resto-Finder
        </h1>

        <p class="tagline">
          Laper laper laper
        </p>
        <a class="btn btn-full m-3" href="#" id="started">Get Started Now</a>
        <a class="btn btn-full" href="#" id="signinMethod" data-toggle="modal" data-target="#loginModal">Signin</a>
        <a class="btn btn-full m-3" href="#" id="logout">Logout</a>
      </div>
    </div>

  </section>
  <!-- /Hero -->

  <!-- MODAL LOGIN -->
  <div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Signin</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="signClose">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form>
            <div class="form-group">
              <label for="exampleInputEmail1">Email address</label>
              <input type="email" class="form-control" id="loginEmail" aria-describedby="emailHelp" placeholder="Enter email">
              <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
            </div>
            <div class="form-group">
              <label for="exampleInputPassword1">Password</label>
              <input type="password" class="form-control" id="loginPassword" placeholder="Password">
            </div>
            <button type="submit" class="btn btn-primary" id="submitLogin">Submit</button>
          </form>
        </div>
        <div class="modal-footer">
            <div class="g-signin2" data-onsuccess="onSignIn"></div>
        </div>
      </div>
    </div>
  </div>
  <!-- / MODAL LOGIN -->

  <!-- Content Login-->
  <div id="login">
  <!-- Header -->
  <header id="header">
    <div class="container">

      <div id="logo" class="pull-left">
        <a href="index.html"><img src="img/finder.png" alt="" title="" /></img></a>
        <!-- Uncomment below if you prefer to use a text image -->
        <!--<h1><a href="#hero">Bell</a></h1>-->
      </div>

      <nav id="nav-menu-container">
        <ul class="nav-menu">
          <li class="menu-has-children"><a href="">Categories</a>
            <ul id="categories-nav">
            </ul>
          </li>
          <li class="menu-has-children"><a href="">Cuisinines</a>
            <ul id="cuisines-nav">
            </ul>
          </li>
          <li class="menu"><a href="#recipe">Recipe Feature</a>
          </li>
        </ul>
      </nav>
    </div>
  </header>
  <!-- #header -->

  <!-- About -->

  <section class="about" id="about">
    <div class="container text-center">
        <div class="input-group mb-3 dropdown">
            <input type="text" class="form-control" id="search-form" placeholder="Search" aria-label="Recipient's username" aria-describedby="basic-addon2">
            <div class="input-group-append">
              <button class="btn btn-outline-secondary" id="search-button" data-toggle="dropdown" type="button"><i class="fa fa-search text-grey" aria-hidden="true"></i></button>
            </div>
        </div>
    </div>
    <div class="portfolio-grid">
        <div class="row" id="restaurants-card">
        </div>
    </div>
  </section>
  <!-- /About -->

  <!-- MAP -->
  <div id="map"></div>
  <div class="container text-center">
        <a class="btn btn-full m-3" href="#map" id="directions" onclick="direction()">Get Directions</a>
  </div>
  <!-- /MAP -->

  <div class="container" id="recipe">
      <div class="row">
        <div class="row justify-content-center col-12">
          <div class="col-4 mt-5">
            <h3 >Recipe Finder</h3>
          </div>
          <div class="col-12 col-md-10 col-lg-8">
              <form class="card card-sm" id="searchRecipe">
                  <div class="card-body row no-gutters align-items-center">
                      <!--end of col-->
                      <div class="col">
                          <input class="form-control form-control-lg form-control-borderless" type="search" placeholder="Search recipe" id="search">
                      </div>
                      <!--end of col-->
                      <div class="col-auto">
                          <button class="btn btn-lg btn-success" type="submit">Search</button>
                      </div>
                      <!--end of col-->
                  </div>
              </form>
          </div>
        </div>
      </div>
      <div class="row recipeList w-100 border align-items-left">
      </div>
  </div>
  

  <!-- Call to Action -->
  <!-- /Portfolio -->
  <!-- @component: footer -->
</div>


  <a class="scrolltop" href="#"><span class="fa fa-angle-up"></span></a>


  
  <script src="https://apis.google.com/js/platform.js" async defer></script>
  
  <!-- Required JavaScript Libraries -->
  <script src="lib/jquery/jquery.min.js"></script>
  <script src="lib/jquery/jquery-migrate.min.js"></script>
  <script src="lib/superfish/hoverIntent.js"></script>
  <script src="lib/superfish/superfish.min.js"></script>
  <script src="lib/tether/js/tether.min.js"></script>
  <script src="lib/stellar/stellar.min.js"></script>
  <script src="lib/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="lib/counterup/counterup.min.js"></script>
  <script src="lib/waypoints/waypoints.min.js"></script>
  <script src="lib/easing/easing.js"></script>
  <script src="lib/stickyjs/sticky.js"></script>
  <script src="lib/parallax/parallax.js"></script>
  <script src="lib/lockfixed/lockfixed.min.js"></script>
  
  <!-- Template Specisifc Custom Javascript File -->
  <script src="js/custom.js"></script>
  <script src="contactform/contactform.js"></script>
  <script src="js/food.js"></script>
  <script src="js/user.js"></script>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAMRdgd1-xW2l8-aF4aMNMV6ykEzeSk3tU&callback=initMap"
  async defer></script>
  <script src="js/maps.js"></script>
  <script>
      function getRecipes() {
        let q = $('#search').val();
        console.log(q);
        let options ={
          url: `http://localhost:3000/nutrition?q=${q}`,
          method: 'GET',
        }      
        $.ajax(options)
        .done(({top10}) => {
          $('.recipeList').children().remove();
          top10.forEach(recipe => {
          let html ='';
          let stars = Math.floor(recipe.social_rank /10);
          html += `<div class="card w-25 ml-3 mt-3">`
          html += `  <img class="card-img-top" src=${recipe.image_url} alt="recipe">`
          html += `  <h5 class="card-title">${recipe.title}</h5>`
          html +='<div class="d-flex justify-content-center stars">'
          for(i=0; i<stars; i++) {
            html += `<span class="fa fa-star checked col-1" style="display:inline"></span>`
          }
          html +='</div>'
          html += `    <p class="card-text d-flex justify-content-center">created by: ${recipe.publisher}</p>`
          html += `    <a href=${recipe.source_url} class="btn btn-warning">Get recipe</a>`
          html += `  </div>`
          html += `</div>`
          $('.card').css('background-color','#f1f1f1')
          $('.recipeList').append(html)
          })
        })
        .fail(()=> {
          console.log('server request failed');
          $('.recipeList').children().remove();
          html +='</div>'
          html += ` <h3> server error. Please try again. </h3>`
          html += `</div>`
          $('.recipeList').append(html)
        })
      }
      
      $(document).ready(()=> {
        $('#searchRecipe').submit((event)=> {
          getRecipes();
          event.preventDefault()
        })
  
      })
    
    </script>

</body>
</html>
